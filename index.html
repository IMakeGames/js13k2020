<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<canvas id=main width=999 height=999></canvas>
<style>
    #main {position:fixed;width:99.5vmin;top:49.9%;left:49.9%;transform:translateX(-50%)translateY(-50%);}
</style>
<script src="objects.js"></script>
<script>
    //console.log("helo world");
    var main = document.getElementById("main");
    var ctx = document.getElementById("main").getContext("2d");
    //Set all smoothing effects off
    ctx.imageSmoothingEnabled = false;
    ctx.webkitImageSmoothingEnabled = false;
    ctx.mozImageSmoothingEnabled = false;
    ctx.msImageSmoothingEnabled = false;
    ctx.oImageSmoothingEnabled = false;
    //Set some drawing variables
    ctx.strokeStyle = 'red';
    ctx.fillStyle = 'green';
    ctx.lineWidth = 5;

    var stateBits = 0;
    //ctx.fillRect(0,0,1000,1000);
    let keys = {
        'w': 1,
        'd': 2,
        's': 4,
        'a': 8,
        'q': 16
    }

    window.addEventListener('keydown', function (event) {
        stateBits |= keys[event.key];
        //console.log(stateByte);
    }, false);

    window.addEventListener('keyup', function (event) {
        stateBits ^= keys[event.key];
        //console.log(stateByte);
    }, false);

    var obj = genObj(100,100);
    var ropes = [genRopeSec(50, 50, 25)];
    obj.rope = ropes[0];
    var lastTime = Date.now();
    function game_tick() {
        ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
        obj.update(stateBits, ctx);
        //ropes.forEach(rope => rope.update(ctx));
        requestAnimationFrame(game_tick);
    }
    game_tick();
</script>
</body>
</html>